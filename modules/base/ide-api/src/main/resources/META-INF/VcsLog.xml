<!--
  - Copyright 2013-2016 consulo.io
  -
  - Licensed under the Apache License, Version 2.0 (the "License");
  - you may not use this file except in compliance with the License.
  - You may obtain a copy of the License at
  -
  - http://www.apache.org/licenses/LICENSE-2.0
  -
  - Unless required by applicable law or agreed to in writing, software
  - distributed under the License is distributed on an "AS IS" BASIS,
  - WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  - See the License for the specific language governing permissions and
  - limitations under the License.
  -->
<consulo-plugin>
  <extensionPoints>
    <extensionPoint name="logProvider" interface="consulo.ide.impl.idea.vcs.log.VcsLogProvider" area="PROJECT"/>
    <extensionPoint name="logHighlighterFactory" interface="consulo.ide.impl.idea.vcs.log.ui.VcsLogHighlighterFactory" area="PROJECT"/>
  </extensionPoints>

  <extensions defaultExtensionNs="consulo">
    <changesViewContent tabName="Log" className="consulo.ide.impl.idea.vcs.log.impl.VcsLogContentProvider"
                        predicateClassName="consulo.ide.impl.idea.vcs.log.impl.VcsLogContentProvider$VcsLogVisibilityPredicate"/>

    <applicationService serviceInterface="consulo.ide.impl.idea.vcs.log.graph.PermanentGraphBuilder"
                        serviceImplementation="consulo.ide.impl.idea.vcs.log.graph.PermanentGraphBuilderImpl"/>

    <projectService serviceImplementation="consulo.ide.impl.idea.vcs.log.impl.VcsProjectLog"/>
    <projectService serviceInterface="consulo.ide.impl.idea.vcs.log.VcsLogObjectsFactory"
                    serviceImplementation="consulo.ide.impl.idea.vcs.log.impl.VcsLogObjectsFactoryImpl"/>
    <projectService serviceInterface="consulo.ide.impl.idea.vcs.log.data.VcsLogTabsProperties"
                    serviceImplementation="consulo.ide.impl.idea.vcs.log.data.VcsLogTabsProperties"/>
    <projectService serviceInterface="consulo.ide.impl.idea.vcs.log.VcsUserRegistry"
                    serviceImplementation="consulo.ide.impl.idea.vcs.log.data.VcsUserRegistryImpl"/>

    <statistics.usagesCollector implementation="consulo.ide.impl.idea.vcs.log.statistics.VcsLogRepoSizeCollector"/>
    <statistics.usagesCollector implementation="consulo.ide.impl.idea.vcs.log.statistics.VcsLogFeaturesCollector"/>

    <logHighlighterFactory implementation="consulo.ide.impl.idea.vcs.log.ui.MyCommitsHighlighter$Factory"/>
    <logHighlighterFactory implementation="consulo.ide.impl.idea.vcs.log.ui.MergeCommitsHighlighter$Factory"/>
    <logHighlighterFactory implementation="consulo.ide.impl.idea.vcs.log.ui.CurrentBranchHighlighter$Factory"/>

    <postStartupActivity implementation="consulo.ide.impl.idea.vcs.log.impl.VcsProjectLog$InitLogStartupActivity"/>

  </extensions>

  <actions>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.VcsLogCreatePatchAction" id="Vcs.Log.CreatePatch"
			use-shortcut-of="ChangesView.CreatePatch"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.GoToHashOrRefAction" id="Vcs.Log.GoToRef" icon="consulo.platform.base.PlatformIconGroup@actions.menu_find"
			use-shortcut-of="Find"
			text="Go To Hash/Branch/Tag" description="Specify hash or name of a branch or a tag to navigate to the commit it points"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.VcsLogQuickSettingsActions" id="Vcs.Log.QuickSettings"
			icon="consulo.platform.base.PlatformIconGroup@general.gearplain" text="Quick Settings" description="Quick Settings"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.VcsLogTextFilterSettingsActions" id="Vcs.Log.QuickTextFilterSettings"
			icon="consulo.platform.base.PlatformIconGroup@general.gearplain" text="Text Filter Settings" description="Text Filter Settings"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.IntelliSortChooserToggleAction" id="Vcs.Log.IntelliSortChooser"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.VcsShowLogAction" id="Vcs.Show.Log" text="Show VCS Log">
      <add-to-group group-id="Vcs.Show.Toolwindow.Tab"/>
    </action>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.CompactReferencesViewAction" id="Vcs.Log.CompactReferencesView"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.ShowTagNamesAction" id="Vcs.Log.ShowTagNames"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.CollapseGraphAction" id="Vcs.Log.CollapseAll"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.ExpandGraphAction" id="Vcs.Log.ExpandAll"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.ShowLongEdgesAction" id="Vcs.Log.ShowLongEdges"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.ShowDetailsAction" id="Vcs.Log.ShowDetailsAction"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.ShowRootsColumnAction" id="Vcs.Log.ShowRootsColumnAction"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.FocusTextFilterAction" id="Vcs.Log.FocusTextFilter">
      <keyboard-shortcut first-keystroke="control L" keymap="$default"/>
      <keyboard-shortcut first-keystroke="control L" keymap="Visual Studio" remove="true"/>
    </action>
    <group class="consulo.ide.impl.idea.vcs.log.ui.actions.HighlightersActionGroup" id="Vcs.Log.HighlightersActionGroup"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.OpenAnotherLogTabAction" id="Vcs.Log.OpenAnotherTab"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.CloseLogTabAction" id="Vcs.Log.CloseLogTabAction"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.RefreshLogAction" id="Vcs.Log.Refresh" use-shortcut-of="Refresh"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.ShowGraphHistoryAction" id="Vcs.Show.Graph.History"
			text="Show History as Graph" description="Show History as Graph" internal="true"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.ShowCommitTooltipAction" id="Vcs.Log.ShowTooltip"
			text="Show Commit Tooltip" description="Show tooltip for currently selected commit in the Log"
			use-shortcut-of="QuickJavaDoc"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.EnableFilterByRegexAction" id="Vcs.Log.EnableFilterByRegexAction"
			text="Regex"/>
    <action class="consulo.ide.impl.idea.vcs.log.ui.actions.EnableMatchCaseAction" id="Vcs.Log.MatchCaseAction"
			text="Match Case"/>

    <group id="Vcs.Log.Settings">
      <reference id="Vcs.Log.ShowRootsColumnAction"/>
      <reference id="Vcs.Log.CompactReferencesView"/>
      <reference id="Vcs.Log.ShowTagNames"/>
      <separator/>
      <reference id="Vcs.Log.CollapseAll"/>
      <reference id="Vcs.Log.ExpandAll"/>
      <reference id="Vcs.Log.HighlightersActionGroup"/>
      <separator/>
      <reference id="ContextHelp"/>
    </group>
    <group id="Vcs.Log.TextFilterSettings">
      <reference id="Vcs.Log.EnableFilterByRegexAction"/>
      <reference id="Vcs.Log.MatchCaseAction"/>
    </group>
    <group id="Vcs.Log.Toolbar.Internal">
      <reference id="Vcs.Log.ShowLongEdges"/>
      <reference id="Vcs.Log.Refresh"/>
      <reference id="Vcs.Log.GoToRef"/>
      <group id="Vcs.Log.Toolbar"/>
      <separator/>
      <reference ref="Vcs.Log.OpenAnotherTab"/>
      <reference ref="Vcs.Log.CloseLogTabAction"/>
    </group>
    <group id="Vcs.Log.ContextMenu">
      <reference id="Vcs.CopyRevisionNumberAction"/>
      <reference id="Vcs.Log.CreatePatch"/>
    </group>

    <group id="Log.KeymapGroup" text="Log">
      <reference ref="Vcs.Log.CreatePatch"/>
      <separator/>
      <reference ref="Vcs.Log.GoToRef"/>
      <reference ref="Vcs.Log.FocusTextFilter"/>
      <reference ref="Vcs.Log.QuickTextFilterSettings"/>
      <reference ref="Vcs.Log.EnableFilterByRegexAction"/>
      <reference ref="Vcs.Log.MatchCaseAction"/>
      <separator/>
      <reference ref="Vcs.Log.IntelliSortChooser"/>
      <reference ref="Vcs.Log.CollapseAll"/>
      <reference ref="Vcs.Log.ExpandAll"/>
      <reference ref="Vcs.Log.ShowLongEdges"/>
      <separator/>
      <reference ref="Vcs.Log.QuickSettings"/>
      <reference ref="Vcs.Log.CompactReferencesView"/>
      <reference ref="Vcs.Log.ShowTagNames"/>
      <reference ref="Vcs.Log.ShowDetailsAction"/>
      <reference ref="Vcs.Log.ShowRootsColumnAction"/>
      <separator/>
      <reference ref="Vcs.Log.Refresh"/>
      <reference ref="Vcs.Log.OpenAnotherTab"/>
      <reference ref="Vcs.Log.CloseLogTabAction"/>

      <add-to-group group-id="Vcs.KeymapGroup"/>
    </group>
  </actions>

</consulo-plugin>

